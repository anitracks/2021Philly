\hypertarget{namespacecorrelations}{}\doxysection{correlations Namespace Reference}
\label{namespacecorrelations}\index{correlations@{correlations}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespacecorrelations_a20ed0e303ef453a17dd601e1d4bd479c}{main}} ()
\begin{DoxyCompactList}\small\item\em This is the main function that reads in a csv file containing the court data from the filename passed as the first command line argument. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacecorrelations_a20ed0e303ef453a17dd601e1d4bd479c}\label{namespacecorrelations_a20ed0e303ef453a17dd601e1d4bd479c}} 
\index{correlations@{correlations}!main@{main}}
\index{main@{main}!correlations@{correlations}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily def correlations.\+main (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



This is the main function that reads in a csv file containing the court data from the filename passed as the first command line argument. 



Definition at line 19 of file correlations.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{19 \textcolor{keyword}{def }\mbox{\hyperlink{namespacecorrelations_a20ed0e303ef453a17dd601e1d4bd479c}{main}}():}
\DoxyCodeLine{20     \textcolor{stringliteral}{"{}"{}"{}! This is the main function that reads in a csv file containing the}}
\DoxyCodeLine{21 \textcolor{stringliteral}{    court data from the filename passed as the first command line argument. }}
\DoxyCodeLine{22 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{23     parser = argparse.ArgumentParser(description=\_\_doc\_\_, fromfile\_prefix\_chars=\textcolor{stringliteral}{'@'})}
\DoxyCodeLine{24     parser.add\_argument(\textcolor{stringliteral}{'csvfile'}, help=\textcolor{stringliteral}{'The name of the csv file to load'})}
\DoxyCodeLine{25 }
\DoxyCodeLine{26     start\_time = datetime.datetime.now()  \textcolor{comment}{\# save the time the script started}}
\DoxyCodeLine{27     args = parser.parse\_args()  \textcolor{comment}{\# parse the command line arguments}}
\DoxyCodeLine{28 }
\DoxyCodeLine{29     \textcolor{comment}{\# Plaintiff Attorney ID and Defendant Attorney ID come in as mixed types for some reason}}
\DoxyCodeLine{30     csvDF = pd.read\_csv(args.csvfile)  \textcolor{comment}{\# read in the csv data}}
\DoxyCodeLine{31 }
\DoxyCodeLine{32     df = \mbox{\hyperlink{namespacecleanCountOutcomes_a4274f083552a8e34e4f1100d27302ef2}{cleanCountOutcomes.removeDuplicates}}(csvDF)}
\DoxyCodeLine{33     (plaintiffs, df) = \mbox{\hyperlink{namespacecleanPlaintiffs_ac95f78e00ae5ea7f5d4f292d6880844e}{cleanPlaintiffs.plaintiffList}}(df, \textcolor{stringliteral}{'Plaintiff Name(s)'})}
\DoxyCodeLine{34     (outcomes, df) = \mbox{\hyperlink{namespacecleanCountOutcomes_a5293171c9a56b78cc70e003c9817e261}{cleanCountOutcomes.outcomeList}}(df, \textcolor{stringliteral}{'Case Outcome'})}
\DoxyCodeLine{35     print(df[\textcolor{stringliteral}{'PlaintiffCleaned'}].head())}
\DoxyCodeLine{36 }
\DoxyCodeLine{37     \textcolor{comment}{\# Look at rows where Plaintiff Name(s) == plaintiffs}}
\DoxyCodeLine{38     df.loc[df[\textcolor{stringliteral}{'PlaintiffCleaned'}] == plaintiffs.index[0],\textcolor{stringliteral}{'OutcomeCleaned'}].value\_counts()}
\DoxyCodeLine{39     \textcolor{comment}{\# need to use cleaned outcomes, not raw outcomes for line above \string^}}
\DoxyCodeLine{40 }
\DoxyCodeLine{41     \textcolor{comment}{\# https://stackoverflow.com/questions/48465941/counting-\/combinations-\/between-\/two-\/dataframe-\/columns}}
\DoxyCodeLine{42     comparedPO = pd.crosstab(df[\textcolor{stringliteral}{'PlaintiffCleaned'}], df[\textcolor{stringliteral}{'OutcomeCleaned'}])  \textcolor{comment}{\# Seems to be a good base dataset}}
\DoxyCodeLine{43     comparedPO.to\_csv(\textcolor{stringliteral}{'comparedPO.csv'})}
\DoxyCodeLine{44     groupedPO = df.groupby([\textcolor{stringliteral}{'PlaintiffCleaned'},\textcolor{stringliteral}{'OutcomeCleaned'}]).size().reset\_index().rename(columns=\{0:\textcolor{stringliteral}{'count'}\})  \textcolor{comment}{\# data not in right form}}
\DoxyCodeLine{45 }
\DoxyCodeLine{46     \textcolor{comment}{\# This is a bootstrapping method to find more of the similar plaintiff names}}
\DoxyCodeLine{47     matched = 0}
\DoxyCodeLine{48     diffMatched = 0}
\DoxyCodeLine{49     \textcolor{keywordflow}{for} index, value \textcolor{keywordflow}{in} plaintiffs.items():}
\DoxyCodeLine{50         nFind = len(df[df[\textcolor{stringliteral}{'Plaintiff Name(s)'}].str.contains(index, case=\textcolor{keyword}{False})])}
\DoxyCodeLine{51         \textcolor{keywordflow}{if} nFind != value:}
\DoxyCodeLine{52             print(f\textcolor{stringliteral}{"{}\{index\} found \{nFind\} out of \{value\}"{}})}
\DoxyCodeLine{53             diffMatched += 1}
\DoxyCodeLine{54             \textcolor{comment}{\#pdb.set\_trace()}}
\DoxyCodeLine{55         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{56             print(f\textcolor{stringliteral}{"{}\{index\} matched"{}})}
\DoxyCodeLine{57             matched += 1}
\DoxyCodeLine{58 }
\DoxyCodeLine{59     print(f\textcolor{stringliteral}{"{}\{matched\} matched, \{diffMatched\} didn't match"{}})}
\DoxyCodeLine{60     stop\_time = datetime.datetime.now()}
\DoxyCodeLine{61     print(f\textcolor{stringliteral}{'\{\_\_file\_\_\} took \{stop\_time-\/start\_time\} seconds'})}
\DoxyCodeLine{62 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacecorrelations_a20ed0e303ef453a17dd601e1d4bd479c_cgraph}
\end{center}
\end{figure}
