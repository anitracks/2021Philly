\hypertarget{namespacedbscanTest}{}\doxysection{dbscan\+Test Namespace Reference}
\label{namespacedbscanTest}\index{dbscanTest@{dbscanTest}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespacedbscanTest_a53f6789a745b40c715e0ac3fa2c84e35}{find\+Base\+Names}} (fname, cutoff=0.\+9)
\begin{DoxyCompactList}\small\item\em Finds the base name of each cleaned name. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacedbscanTest_a0e068c113f7f88b734359519cfc852b0}{main}} ()
\begin{DoxyCompactList}\small\item\em This is the main function that reads in a similarity matrix pickle file created by \mbox{\hyperlink{cleanPlaintiffs_8py}{clean\+Plaintiffs.\+py}} with a -\/s option. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacedbscanTest_a53f6789a745b40c715e0ac3fa2c84e35}\label{namespacedbscanTest_a53f6789a745b40c715e0ac3fa2c84e35}} 
\index{dbscanTest@{dbscanTest}!findBaseNames@{findBaseNames}}
\index{findBaseNames@{findBaseNames}!dbscanTest@{dbscanTest}}
\doxysubsubsection{\texorpdfstring{findBaseNames()}{findBaseNames()}}
{\footnotesize\ttfamily def dbscan\+Test.\+find\+Base\+Names (\begin{DoxyParamCaption}\item[{}]{fname,  }\item[{}]{cutoff = {\ttfamily 0.9} }\end{DoxyParamCaption})}



Finds the base name of each cleaned name. 


\begin{DoxyParams}{Parameters}
{\em fname} & The filename of the pickle file created by plaintiff\+List \\
\hline
{\em cutoff} & The cutoff similarity between names to assume are the same \\
\hline
\end{DoxyParams}


Definition at line 31 of file dbscan\+Test.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{31 \textcolor{keyword}{def }\mbox{\hyperlink{namespacedbscanTest_a53f6789a745b40c715e0ac3fa2c84e35}{findBaseNames}}(fname, cutoff=0.9):}
\DoxyCodeLine{32     \textcolor{stringliteral}{"{}"{}"{}! Finds the base name of each cleaned name}}
\DoxyCodeLine{33 \textcolor{stringliteral}{}}
\DoxyCodeLine{34 \textcolor{stringliteral}{    @param fname The filename of the pickle file created by plaintiffList}}
\DoxyCodeLine{35 \textcolor{stringliteral}{    @param cutoff The cutoff similarity between names to assume are the same}}
\DoxyCodeLine{36 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{37     similarNames = pd.read\_pickle(fname)}
\DoxyCodeLine{38     distanceNames = 1 -\/ similarNames}
\DoxyCodeLine{39 }
\DoxyCodeLine{40     \textcolor{comment}{\# fitStartTime = datetime.datetime.now()}}
\DoxyCodeLine{41     \textcolor{comment}{\# dbfit = DBSCAN(eps=0.1, min\_samples=2, metric='precomputed').fit(distanceNames)}}
\DoxyCodeLine{42     \textcolor{comment}{\# fitEndTime = datetime.datetime.now()}}
\DoxyCodeLine{43     \textcolor{comment}{\# print(f'Fitting took \{fitEndTime -\/ fitStartTime\}')}}
\DoxyCodeLine{44     \textcolor{comment}{\# print(f'set of labels: \{set(dbfit.labels\_)\}')}}
\DoxyCodeLine{45     \textcolor{comment}{\# print(f'Group 0 contains: \{distanceNames.index[dbfit.labels\_ == 0]\}')}}
\DoxyCodeLine{46 }
\DoxyCodeLine{47     \textcolor{comment}{\# scan through different eps values recording the numbers of core samples}}
\DoxyCodeLine{48     \textcolor{comment}{\# and record the names at each step to show which names were added each time}}
\DoxyCodeLine{49     fitStartTime = datetime.datetime.now()}
\DoxyCodeLine{50     fits = []}
\DoxyCodeLine{51     min\_eps = 0.01}
\DoxyCodeLine{52     max\_eps = 0.24}
\DoxyCodeLine{53     eps\_step = 0.01}
\DoxyCodeLine{54     print(\textcolor{stringliteral}{"{}Testing different epsilon (eps) values for DBSCAN."{}})}
\DoxyCodeLine{55     print(f\textcolor{stringliteral}{"{}testing from \{min\_eps\} to \{max\_eps\} stepping \{eps\_step\}"{}})}
\DoxyCodeLine{56     epsList = np.arange(min\_eps, max\_eps, eps\_step)}
\DoxyCodeLine{57     curveData = np.zeros([len(epsList),2])}
\DoxyCodeLine{58     ii = 0}
\DoxyCodeLine{59     \textcolor{keywordflow}{for} eps \textcolor{keywordflow}{in} epsList:}
\DoxyCodeLine{60         print(f\textcolor{stringliteral}{"{}Fitting \{eps\}:"{}})}
\DoxyCodeLine{61         dbfit = DBSCAN(eps=eps, min\_samples=2, metric=\textcolor{stringliteral}{'precomputed'}).fit(distanceNames)}
\DoxyCodeLine{62         fits.append(dbfit)}
\DoxyCodeLine{63         curveData[ii,0] = eps}
\DoxyCodeLine{64         curveData[ii,1] = dbfit.components\_.shape[0]}
\DoxyCodeLine{65         ii += 1}
\DoxyCodeLine{66     fitEndTime = datetime.datetime.now()}
\DoxyCodeLine{67     print(f\textcolor{stringliteral}{'Fitting took \{fitEndTime -\/ fitStartTime\}'})}
\DoxyCodeLine{68     fig = plt.figure(figsize=(9,6))}
\DoxyCodeLine{69     plt.rc(\textcolor{stringliteral}{'xtick'}, labelsize=12)}
\DoxyCodeLine{70     plt.rc(\textcolor{stringliteral}{'ytick'}, labelsize=12)}
\DoxyCodeLine{71     plt.plot(curveData[:,0], curveData[:,1], \textcolor{stringliteral}{'bo-\/-\/'})}
\DoxyCodeLine{72     plt.title(\textcolor{stringliteral}{'Clustered Name Count'}, fontsize=22)}
\DoxyCodeLine{73     plt.ylabel(\textcolor{stringliteral}{'Number of Names that were Clustered'}, fontsize=16)}
\DoxyCodeLine{74     plt.xlabel(\textcolor{stringliteral}{'Allowed Neighbor Distance (eps)'}, fontsize=16)}
\DoxyCodeLine{75     plt.grid(\textcolor{keyword}{True})}
\DoxyCodeLine{76     plt.savefig(f\textcolor{stringliteral}{'\{fitEndTime:\%Y\%m\%d\%H\%M\%S\}-\/CoreCount.png'}, bbox\_inches=\textcolor{stringliteral}{'tight'}, pad\_inches=0.1)}
\DoxyCodeLine{77     plt.show()}
\DoxyCodeLine{78 }
\DoxyCodeLine{79 \textcolor{comment}{\# the following code collects the clusters of names to look at}}
\DoxyCodeLine{80     \textcolor{comment}{\# Need list of names for each cluster to look over}}
\DoxyCodeLine{81     \textcolor{comment}{\# matchFit = 9  \# the number of the fit to use for subsquent processing}}
\DoxyCodeLine{82     \textcolor{comment}{\# clusterSet = set(fits[matchFit].labels\_)}}
\DoxyCodeLine{83     \textcolor{comment}{\# clusterSet.discard(-\/1)  \# discard the "{}noise"{} names}}
\DoxyCodeLine{84     \textcolor{comment}{\# clusterNameLists = []}}
\DoxyCodeLine{85     \textcolor{comment}{\# for clust in clusterSet:}}
\DoxyCodeLine{86     \textcolor{comment}{\#     clusterNameLists.append(distanceNames.index[fits[matchFit].labels\_ == clust])}}
\DoxyCodeLine{87     \textcolor{comment}{\# clusterDF = pd.DataFrame(clusterNameLists)}}
\DoxyCodeLine{88 }
\DoxyCodeLine{89     \textcolor{comment}{\# distanceNames.index[fits[matchFit].labels\_ == 0]}}
\DoxyCodeLine{90     \textcolor{comment}{\# pdb.set\_trace()}}
\DoxyCodeLine{91 }
\DoxyCodeLine{92     \textcolor{comment}{\# Need prototype (base) name for each cluster}}
\DoxyCodeLine{93     \textcolor{comment}{\# output the "{}noise"{} names (cluster -\/1) as a separate file since so long}}
\DoxyCodeLine{94 }
\DoxyCodeLine{95 }

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=345pt]{namespacedbscanTest_a53f6789a745b40c715e0ac3fa2c84e35_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacedbscanTest_a0e068c113f7f88b734359519cfc852b0}\label{namespacedbscanTest_a0e068c113f7f88b734359519cfc852b0}} 
\index{dbscanTest@{dbscanTest}!main@{main}}
\index{main@{main}!dbscanTest@{dbscanTest}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily def dbscan\+Test.\+main (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



This is the main function that reads in a similarity matrix pickle file created by \mbox{\hyperlink{cleanPlaintiffs_8py}{clean\+Plaintiffs.\+py}} with a -\/s option. 

It then tries different epsilon values for the DBSCAN clustering algorithm and plots the results. 

Definition at line 96 of file dbscan\+Test.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{96 \textcolor{keyword}{def }\mbox{\hyperlink{namespacedbscanTest_a0e068c113f7f88b734359519cfc852b0}{main}}():}
\DoxyCodeLine{97     \textcolor{stringliteral}{"{}"{}"{}! This is the main function that reads in a similarity matrix pickle file }}
\DoxyCodeLine{98 \textcolor{stringliteral}{    created by cleanPlaintiffs.py with a -\/s option. It then tries different }}
\DoxyCodeLine{99 \textcolor{stringliteral}{    epsilon values for the DBSCAN clustering algorithm and plots the results.}}
\DoxyCodeLine{100 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{101     parser = argparse.ArgumentParser(description=\_\_doc\_\_, fromfile\_prefix\_chars=\textcolor{stringliteral}{'@'})}
\DoxyCodeLine{102     parser.add\_argument(\textcolor{stringliteral}{'picklefile'}, help=\textcolor{stringliteral}{'The name of the similarity matrix pickle file to load'})}
\DoxyCodeLine{103     \textcolor{comment}{\# parser.add\_argument('-\/c', '-\/-\/cutoff', help='The cutoff for similarity checking', type=float)}}
\DoxyCodeLine{104 }
\DoxyCodeLine{105     start\_time = datetime.datetime.now()  \textcolor{comment}{\# save the time the script started}}
\DoxyCodeLine{106     args = parser.parse\_args()  \textcolor{comment}{\# parse the command line arguments}}
\DoxyCodeLine{107 }
\DoxyCodeLine{108     \textcolor{keywordflow}{if} args.picklefile:}
\DoxyCodeLine{109         \textcolor{keywordflow}{if} args.cutoff:}
\DoxyCodeLine{110             cutoff = args.cutoff}
\DoxyCodeLine{111         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{112             cutoff = 0.8}
\DoxyCodeLine{113         \mbox{\hyperlink{namespacedbscanTest_a53f6789a745b40c715e0ac3fa2c84e35}{findBaseNames}}(args.picklefile, cutoff)}
\DoxyCodeLine{114         \textcolor{keywordflow}{return}}
\DoxyCodeLine{115     stop\_time = datetime.datetime.now()}
\DoxyCodeLine{116     print(f\textcolor{stringliteral}{'\{\_\_file\_\_\} took \{stop\_time-\/start\_time\} seconds'})}
\DoxyCodeLine{117 }

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=345pt]{namespacedbscanTest_a0e068c113f7f88b734359519cfc852b0_cgraph}
\end{center}
\end{figure}
