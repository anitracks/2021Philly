\hypertarget{namespacecleanCountOutcomes}{}\doxysection{clean\+Count\+Outcomes Namespace Reference}
\label{namespacecleanCountOutcomes}\index{cleanCountOutcomes@{cleanCountOutcomes}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespacecleanCountOutcomes_a4274f083552a8e34e4f1100d27302ef2}{remove\+Duplicates}} (df)
\begin{DoxyCompactList}\small\item\em Cleans the main df by removing duplicate rows. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacecleanCountOutcomes_a03e2f7d864028a0fa17bf09f898d0d32}{clean\+Outcome}} (dirty\+String)
\begin{DoxyCompactList}\small\item\em Removes the ALL CAPS words at the end of a string dirty\+String, everything after the first period (.), and any date/time and everything after it. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacecleanCountOutcomes_a5293171c9a56b78cc70e003c9817e261}{outcome\+List}} (df, column\+Name=\textquotesingle{}Case Outcome\textquotesingle{})
\begin{DoxyCompactList}\small\item\em Returns a list of cleaned and sorted outcomes that have been grouped by commonality and counts the number of occurrences of each one. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacecleanCountOutcomes_a99564092ed8f0a8cb6062fd33086ae28}{main}} ()
\begin{DoxyCompactList}\small\item\em This is the main function that reads in a csv file containing the court data from the filename passed as the first command line argument. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacecleanCountOutcomes_a2386f6f7a71fc46b2e35a54a7968d053}{end\+Caps}} = re.\+compile(r\textquotesingle{}(\textbackslash{}b(?\+:\mbox{[}A-\/Z\mbox{]}+)\textbackslash{}b(?\+:\textbackslash{}s\mbox{[}A-\/Z\mbox{]}+\textbackslash{}b)$\ast$\textbackslash{}.$\ast$)\$\textquotesingle{})
\begin{DoxyCompactList}\small\item\em matches all caps words to the end of the line \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacecleanCountOutcomes_a897bcd47ddf390703d2ee5531a793765}{datetime\+To\+End}} = re.\+compile(r\textquotesingle{}(\textbackslash{}s\textbackslash{}d\{1,2\}/\textbackslash{}d\{1,2\}/\textbackslash{}d\{4\} \textbackslash{}d\{1,2\}\+:\textbackslash{}d\{2\} \mbox{[}AP\mbox{]}M.$\ast$)\$\textquotesingle{})
\begin{DoxyCompactList}\small\item\em matches date and time to end of line in format 07/17/2017 1\+:15 \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacecleanCountOutcomes_a03e2f7d864028a0fa17bf09f898d0d32}\label{namespacecleanCountOutcomes_a03e2f7d864028a0fa17bf09f898d0d32}} 
\index{cleanCountOutcomes@{cleanCountOutcomes}!cleanOutcome@{cleanOutcome}}
\index{cleanOutcome@{cleanOutcome}!cleanCountOutcomes@{cleanCountOutcomes}}
\doxysubsubsection{\texorpdfstring{cleanOutcome()}{cleanOutcome()}}
{\footnotesize\ttfamily def clean\+Count\+Outcomes.\+clean\+Outcome (\begin{DoxyParamCaption}\item[{}]{dirty\+String }\end{DoxyParamCaption})}



Removes the ALL CAPS words at the end of a string dirty\+String, everything after the first period (.), and any date/time and everything after it. 


\begin{DoxyParams}{Parameters}
{\em dirty\+String} & string that contains extra case specific text \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
cleaned string 
\end{DoxyReturn}


Definition at line 56 of file clean\+Count\+Outcomes.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{56 \textcolor{keyword}{def }\mbox{\hyperlink{namespacecleanCountOutcomes_a03e2f7d864028a0fa17bf09f898d0d32}{cleanOutcome}}(dirtyString):}
\DoxyCodeLine{57     \textcolor{stringliteral}{"{}"{}"{}! Removes the ALL CAPS words at the end of a string dirtyString, }}
\DoxyCodeLine{58 \textcolor{stringliteral}{    everything after the first period (.), and any date/time and everything after it}}
\DoxyCodeLine{59 \textcolor{stringliteral}{       @param dirtyString string that contains extra case specific text}}
\DoxyCodeLine{60 \textcolor{stringliteral}{       @returns cleaned string}}
\DoxyCodeLine{61 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{62     \textcolor{comment}{\#endCaps.sub('', csvNoDups['Case Outcome'][10129]).strip()}}
\DoxyCodeLine{63     \textcolor{comment}{\# Catch the nan's from assumably empty fields}}
\DoxyCodeLine{64     \textcolor{comment}{\# nan's are both the empty strings and NULLs in David's data}}
\DoxyCodeLine{65     if(isinstance(dirtyString, float)):}
\DoxyCodeLine{66         if(math.isnan(dirtyString)):}
\DoxyCodeLine{67             return(\textcolor{stringliteral}{'Blank or NULL'})}
\DoxyCodeLine{68         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{69             pdb.set\_trace()  \textcolor{comment}{\# it isn't an expected value}}
\DoxyCodeLine{70     \textcolor{keywordflow}{try}:}
\DoxyCodeLine{71         cleanedString = endCaps.sub(\textcolor{stringliteral}{''}, dirtyString).strip()}
\DoxyCodeLine{72     \textcolor{keywordflow}{except} TypeError \textcolor{keyword}{as} e:}
\DoxyCodeLine{73         pdb.set\_trace()  \textcolor{comment}{\# unexpected type}}
\DoxyCodeLine{74     firstCleaned = cleanedString.split(\textcolor{stringliteral}{'.'})[0] \textcolor{comment}{\# remove everything after first .}}
\DoxyCodeLine{75     \textcolor{comment}{\# remove everything including and after date-\/time }}
\DoxyCodeLine{76     \textcolor{comment}{\#   (typical format 07/17/2017 1:15)}}
\DoxyCodeLine{77     dateCleaned = datetimeToEnd.sub(\textcolor{stringliteral}{''}, firstCleaned).strip()}
\DoxyCodeLine{78     return(dateCleaned)}
\DoxyCodeLine{79 }
\DoxyCodeLine{80 }

\end{DoxyCode}
\mbox{\Hypertarget{namespacecleanCountOutcomes_a99564092ed8f0a8cb6062fd33086ae28}\label{namespacecleanCountOutcomes_a99564092ed8f0a8cb6062fd33086ae28}} 
\index{cleanCountOutcomes@{cleanCountOutcomes}!main@{main}}
\index{main@{main}!cleanCountOutcomes@{cleanCountOutcomes}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily def clean\+Count\+Outcomes.\+main (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



This is the main function that reads in a csv file containing the court data from the filename passed as the first command line argument. 

It then filters out the duplicate rows. It also calculates the median judgement amount as a proof of concept. Lastly, it calls outcome\+List to create a cleaned and counted list of the outcomes and prints the results. 

Definition at line 101 of file clean\+Count\+Outcomes.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{101 \textcolor{keyword}{def }\mbox{\hyperlink{namespacecleanCountOutcomes_a99564092ed8f0a8cb6062fd33086ae28}{main}}():}
\DoxyCodeLine{102     \textcolor{stringliteral}{"{}"{}"{}! This is the main function that reads in a csv file containing the}}
\DoxyCodeLine{103 \textcolor{stringliteral}{    court data from the filename passed as the first command line argument. }}
\DoxyCodeLine{104 \textcolor{stringliteral}{    It then filters out the duplicate rows. It also calculates the median }}
\DoxyCodeLine{105 \textcolor{stringliteral}{    judgement amount as a proof of concept. Lastly, it calls outcomeList to }}
\DoxyCodeLine{106 \textcolor{stringliteral}{    create a cleaned and counted list of the outcomes and prints the results.}}
\DoxyCodeLine{107 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{108     parser = argparse.ArgumentParser(description=\_\_doc\_\_, fromfile\_prefix\_chars=\textcolor{stringliteral}{'@'})}
\DoxyCodeLine{109     parser.add\_argument(\textcolor{stringliteral}{'csvfile'}, help=\textcolor{stringliteral}{'The name of the csv file to load'})}
\DoxyCodeLine{110 \textcolor{comment}{\#    parser.add\_argument('dbfile', help='The name of the sqlite db file')}}
\DoxyCodeLine{111 }
\DoxyCodeLine{112     start\_time = datetime.datetime.now()  \textcolor{comment}{\# save the time the script started}}
\DoxyCodeLine{113     args = parser.parse\_args()  \textcolor{comment}{\# parse the command line arguments}}
\DoxyCodeLine{114 }
\DoxyCodeLine{115     \textcolor{comment}{\# Plaintiff Attorney ID and Defendant Attorney ID come in as mixed types for some reason}}
\DoxyCodeLine{116     csvDF = pd.read\_csv(args.csvfile)  \textcolor{comment}{\# read in the csv data}}
\DoxyCodeLine{117     \textcolor{comment}{\#print(f'The column names are:\(\backslash\)n\{csvDF.columns.values\}')}}
\DoxyCodeLine{118 }
\DoxyCodeLine{119     csvNoDups = \mbox{\hyperlink{namespacecleanCountOutcomes_a4274f083552a8e34e4f1100d27302ef2}{removeDuplicates}}(csvDF)}
\DoxyCodeLine{120 }
\DoxyCodeLine{121     \textcolor{comment}{\#print("{}\(\backslash\)nThe column types are:"{})}}
\DoxyCodeLine{122     \textcolor{comment}{\#print(csvNoDups.dtypes)  \# print out the data type for each column}}
\DoxyCodeLine{123     }
\DoxyCodeLine{124     \textcolor{comment}{\# calculate the median judgment amount as a demonstration of reading the file}}
\DoxyCodeLine{125     medJudgment = np.nanmedian(csvNoDups[\textcolor{stringliteral}{'Judgment Amount'}])}
\DoxyCodeLine{126     print(f\textcolor{stringliteral}{'\(\backslash\)nThe median judgment amount is \$\{medJudgment\}'})}
\DoxyCodeLine{127 }
\DoxyCodeLine{128     \textcolor{comment}{\# need to look at cases where the same attorney is listed on both sides}}
\DoxyCodeLine{129     \textcolor{comment}{\# try using sent2vec to sort out similar ones}}
\DoxyCodeLine{130     \textcolor{comment}{\# pypi.org/project/sent2vec}}
\DoxyCodeLine{131     outs = \mbox{\hyperlink{namespacecleanCountOutcomes_a5293171c9a56b78cc70e003c9817e261}{outcomeList}}(csvNoDups)[0]}
\DoxyCodeLine{132     print(\textcolor{stringliteral}{'\(\backslash\)nOutcome Subcategories'})}
\DoxyCodeLine{133     print(outs.to\_string())}
\DoxyCodeLine{134 }
\DoxyCodeLine{135     stop\_time = datetime.datetime.now()}
\DoxyCodeLine{136     print(f\textcolor{stringliteral}{'\{\_\_file\_\_\} took \{stop\_time-\/start\_time\} seconds'})}
\DoxyCodeLine{137 }

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacecleanCountOutcomes_a99564092ed8f0a8cb6062fd33086ae28_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacecleanCountOutcomes_a5293171c9a56b78cc70e003c9817e261}\label{namespacecleanCountOutcomes_a5293171c9a56b78cc70e003c9817e261}} 
\index{cleanCountOutcomes@{cleanCountOutcomes}!outcomeList@{outcomeList}}
\index{outcomeList@{outcomeList}!cleanCountOutcomes@{cleanCountOutcomes}}
\doxysubsubsection{\texorpdfstring{outcomeList()}{outcomeList()}}
{\footnotesize\ttfamily def clean\+Count\+Outcomes.\+outcome\+List (\begin{DoxyParamCaption}\item[{}]{df,  }\item[{}]{column\+Name = {\ttfamily \textquotesingle{}Case~Outcome\textquotesingle{}} }\end{DoxyParamCaption})}



Returns a list of cleaned and sorted outcomes that have been grouped by commonality and counts the number of occurrences of each one. 

It applies the clean\+Outcome function to the dataframe of case outcomes.


\begin{DoxyParams}{Parameters}
{\em df} & is a panda dataframe of outcomes from reading in the csv file of data \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
cleaned and sorted outcomes 
\end{DoxyReturn}


Definition at line 81 of file clean\+Count\+Outcomes.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{81 \textcolor{keyword}{def }\mbox{\hyperlink{namespacecleanCountOutcomes_a5293171c9a56b78cc70e003c9817e261}{outcomeList}}(df, columnName='Case Outcome'):}
\DoxyCodeLine{82     \textcolor{stringliteral}{"{}"{}"{}! Returns a list of cleaned and sorted outcomes that}}
\DoxyCodeLine{83 \textcolor{stringliteral}{    have been grouped by commonality and counts the number}}
\DoxyCodeLine{84 \textcolor{stringliteral}{    of occurrences of each one. It applies the cleanOutcome}}
\DoxyCodeLine{85 \textcolor{stringliteral}{    function to the dataframe of case outcomes.}}
\DoxyCodeLine{86 \textcolor{stringliteral}{}}
\DoxyCodeLine{87 \textcolor{stringliteral}{    @param df is a panda dataframe of outcomes from reading in the csv file }}
\DoxyCodeLine{88 \textcolor{stringliteral}{        of data}}
\DoxyCodeLine{89 \textcolor{stringliteral}{    @returns cleaned and sorted outcomes}}
\DoxyCodeLine{90 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{91     outcomes = df[columnName]}
\DoxyCodeLine{92     \textcolor{comment}{\# clean up the outcome string}}
\DoxyCodeLine{93     cleanedOutcomes = outcomes.apply(cleanOutcome)}
\DoxyCodeLine{94     \textcolor{comment}{\# Good ways to count specific occurances: }}
\DoxyCodeLine{95     \textcolor{comment}{\# https://stackoverflow.com/a/35277776}}
\DoxyCodeLine{96     \textcolor{comment}{\# see also cleanedOutcomes.value\_counts()}}
\DoxyCodeLine{97     df = df.assign(OutcomeCleaned=cleanedOutcomes)}
\DoxyCodeLine{98     return((cleanedOutcomes.value\_counts(), df))}
\DoxyCodeLine{99 }
\DoxyCodeLine{100 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacecleanCountOutcomes_a5293171c9a56b78cc70e003c9817e261_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacecleanCountOutcomes_a4274f083552a8e34e4f1100d27302ef2}\label{namespacecleanCountOutcomes_a4274f083552a8e34e4f1100d27302ef2}} 
\index{cleanCountOutcomes@{cleanCountOutcomes}!removeDuplicates@{removeDuplicates}}
\index{removeDuplicates@{removeDuplicates}!cleanCountOutcomes@{cleanCountOutcomes}}
\doxysubsubsection{\texorpdfstring{removeDuplicates()}{removeDuplicates()}}
{\footnotesize\ttfamily def clean\+Count\+Outcomes.\+remove\+Duplicates (\begin{DoxyParamCaption}\item[{}]{df }\end{DoxyParamCaption})}



Cleans the main df by removing duplicate rows. 


\begin{DoxyParams}{Parameters}
{\em df} & Data\+Frame that needs cleaning \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
cleaned df 
\end{DoxyReturn}


Definition at line 42 of file clean\+Count\+Outcomes.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{42 \textcolor{keyword}{def }\mbox{\hyperlink{namespacecleanCountOutcomes_a4274f083552a8e34e4f1100d27302ef2}{removeDuplicates}}(df):}
\DoxyCodeLine{43     \textcolor{stringliteral}{"{}"{}"{}! Cleans the main df by removing duplicate rows}}
\DoxyCodeLine{44 \textcolor{stringliteral}{        @param df DataFrame that needs cleaning}}
\DoxyCodeLine{45 \textcolor{stringliteral}{        @returns cleaned df}}
\DoxyCodeLine{46 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{47     \textcolor{comment}{\# need to filter out exact duplicate rows in base dataset}}
\DoxyCodeLine{48     \textcolor{comment}{\# keep=False keeps both original and duplicate}}
\DoxyCodeLine{49     \textcolor{comment}{\# keep='first' marks all but first as True}}
\DoxyCodeLine{50     dups = df.duplicated(keep=\textcolor{stringliteral}{'first'})  }
\DoxyCodeLine{51     print(f\textcolor{stringliteral}{'\(\backslash\)n\{len(dups[dups==True])\} duplicates found'}) }
\DoxyCodeLine{52     \textcolor{comment}{\#display(csvDF.loc[619,:])  \# display a particular row}}
\DoxyCodeLine{53     df = df.drop\_duplicates(keep=\textcolor{stringliteral}{'first'})}
\DoxyCodeLine{54     return(df)}
\DoxyCodeLine{55 }

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacecleanCountOutcomes_a4274f083552a8e34e4f1100d27302ef2_icgraph}
\end{center}
\end{figure}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{namespacecleanCountOutcomes_a897bcd47ddf390703d2ee5531a793765}\label{namespacecleanCountOutcomes_a897bcd47ddf390703d2ee5531a793765}} 
\index{cleanCountOutcomes@{cleanCountOutcomes}!datetimeToEnd@{datetimeToEnd}}
\index{datetimeToEnd@{datetimeToEnd}!cleanCountOutcomes@{cleanCountOutcomes}}
\doxysubsubsection{\texorpdfstring{datetimeToEnd}{datetimeToEnd}}
{\footnotesize\ttfamily clean\+Count\+Outcomes.\+datetime\+To\+End = re.\+compile(r\textquotesingle{}(\textbackslash{}s\textbackslash{}d\{1,2\}/\textbackslash{}d\{1,2\}/\textbackslash{}d\{4\} \textbackslash{}d\{1,2\}\+:\textbackslash{}d\{2\} \mbox{[}AP\mbox{]}M.$\ast$)\$\textquotesingle{})}



matches date and time to end of line in format 07/17/2017 1\+:15 



Definition at line 40 of file clean\+Count\+Outcomes.\+py.

\mbox{\Hypertarget{namespacecleanCountOutcomes_a2386f6f7a71fc46b2e35a54a7968d053}\label{namespacecleanCountOutcomes_a2386f6f7a71fc46b2e35a54a7968d053}} 
\index{cleanCountOutcomes@{cleanCountOutcomes}!endCaps@{endCaps}}
\index{endCaps@{endCaps}!cleanCountOutcomes@{cleanCountOutcomes}}
\doxysubsubsection{\texorpdfstring{endCaps}{endCaps}}
{\footnotesize\ttfamily clean\+Count\+Outcomes.\+end\+Caps = re.\+compile(r\textquotesingle{}(\textbackslash{}b(?\+:\mbox{[}A-\/Z\mbox{]}+)\textbackslash{}b(?\+:\textbackslash{}s\mbox{[}A-\/Z\mbox{]}+\textbackslash{}b)$\ast$\textbackslash{}.$\ast$)\$\textquotesingle{})}



matches all caps words to the end of the line 



Definition at line 38 of file clean\+Count\+Outcomes.\+py.

