<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>2021 Philly Data Analysis: 2021 Philly Project</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">2021 Philly Data Analysis
   &#160;<span id="projectnumber">0.2.2</span>
   </div>
   <div id="projectbrief">This is a project for the Pew Foundation to analyze court data.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">2021 Philly Project </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_C__Users_SMcneil_Consultant_CLSM_2021Philly_README"></a>This is a collection of code for analyzing the Philly data. The doxygen generated html documentation can be found at <a href="https://anitracks.github.io/2021Philly/index.html">https://anitracks.github.io/2021Philly/index.html</a></p>
<p>Written by Seth McNeill <br  />
 Managed by David McNeill and Stacy Butler</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Setting Up the Environment</h1>
<p>This project was developed using Python 3.9.1 using a virtual environment. The list of packages installed to develop this project is listed in <code>requirements.txt</code>. Not all the packages in <code>requirements.txt</code> are used in the final version of this code. Once the correct version of Python has been installed, the virtual environment can be setup as follows in the directory you have cloned this project into: </p><div class="fragment"><div class="line">python -m venv .venv</div>
<div class="line">.\.venv\Scripts\activate</div>
<div class="line">pip install -r requirements.txt</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md2"></a>
Usage</h1>
<p>The scripts should be run in the order listed here. The data used as input is a csv file created by David McNeill based on the raw data received from the courts.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
cleanCount Outcomes.py</h2>
<p>Cleaning and counting the most occurring outcomes is done as follows using the <a class="el" href="cleanCountOutcomes_8py.html" title="Cleans the outcome data and counts how many of each there are.">cleanCountOutcomes.py</a> script: </p><div class="fragment"><div class="line">python .\src\cleanCountOutcomes.py ..\data\MC_specialreport_limiteddaterange_Nov6.csv</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md4"></a>
cleanPlaintiffs.py - Creating the Comparison Matrix</h2>
<p>Running <a class="el" href="cleanPlaintiffs_8py.html" title="Cleans the plaintiff names and counts frequency of occurance.">cleanPlaintiffs.py</a> as shown below will create the comparison matrix pickle file. This may take 9 minutes to run. It uses the <a href="https://github.com/jamesturk/jellyfish">jellyfish</a> <code>jaro_similarity</code> function to calculate the similarity between plaintiff names. </p><div class="fragment"><div class="line">python .\src\cleanPlaintiffs.py ..\data\MC_specialreport_limiteddaterange_Nov6.csv -s</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5"></a>
dbscanTest.py</h2>
<p>This creates a figure (as a saved .png file) of the number of names clustered vs epsilon using the DBSCAN algorithm on the similarity matrix created in <a class="el" href="cleanPlaintiffs_8py.html" title="Cleans the plaintiff names and counts frequency of occurance.">cleanPlaintiffs.py</a>. The figure is used to decide what value of epsilon to use when calling <a class="el" href="cleanPlaintiffs_8py.html" title="Cleans the plaintiff names and counts frequency of occurance.">cleanPlaintiffs.py</a> to do the plaintiff clustering below. We chose an epsilon value of 0.1 based on the figure. </p><div class="fragment"><div class="line">python src\dbscanTest.py 20220510152542-comparisonMatrix.pkl</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md6"></a>
cleanPlaintiffs.py - Plaintiff vs Outcome Matrix</h2>
<p>The following is an example of running the <a class="el" href="cleanPlaintiffs_8py.html" title="Cleans the plaintiff names and counts frequency of occurance.">cleanPlaintiffs.py</a> script from inside the root folder to calculate the comparedPO.csv (plaintiffs vs outcomes matrix) file which takes about 41 seconds. It requires a camparison matrix pickle file to have already been created. </p><div class="fragment"><div class="line">python .\src\cleanPlaintiffs.py ..\data\MC_specialreport_limiteddaterange_Nov6.csv -p .\src\20215121490-comparisonMatrix.pkl -e 0.10</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md7"></a>
Updating Documentation Using Doxygen</h2>
<p>The <code>docs</code> folder has a separate Git repository for the documentation. To update the documentation, <code>cd</code> into the <code>docs</code> folder. Inside that folder run: </p><div class="fragment"><div class="line">doxygen ..\doxygen\Doxygen.in</div>
</div><!-- fragment --><p> This will create all the new documentation. To commit everything including the new/deleted files run: </p><div class="fragment"><div class="line">git add -A</div>
</div><!-- fragment --><p> Now it is ready to <code>commit</code> and <code>push</code>.</p>
<h1><a class="anchor" id="autotoc_md8"></a>
Progress</h1>
<h2><a class="anchor" id="autotoc_md9"></a>
2021 March 18</h2>
<p>The code in <a class="el" href="cleanCountOutcomes_8py.html" title="Cleans the outcome data and counts how many of each there are.">cleanCountOutcomes.py</a> reads in a csv file from the Philidelphia court system, cleans, collates, and prints out the outcomes column.</p>
<h3><a class="anchor" id="autotoc_md10"></a>
Example output</h3>
<div class="fragment"><div class="line">Outcome Subcategories                                              Count</div>
<div class="line">Judgment for Plaintiff by Default                                  40711</div>
<div class="line">No Service, Dismissed without Prejudice                            28300</div>
<div class="line">Continued To                                                       10414</div>
<div class="line">Withdrawn without Prejudice                                         9647</div>
<div class="line">Blank or NULL                                                       9236</div>
<div class="line">Settled, Discontinued and Ended                                     5015</div>
<div class="line">Administrative Continuance To                                       4694</div>
<div class="line">Continued By Subpoena To                                            4511</div>
<div class="line">Courtroom Transferred To                                            1613</div>
<div class="line">Judgment for Plaintiff                                              1128</div>
<div class="line">Judgment for Defendant                                               580</div>
<div class="line">Judgment for Defendant by Default                                    308</div>
<div class="line">Judgment Satisfied                                                   198</div>
<div class="line">Held Under Advisement                                                143</div>
<div class="line">Judgment for Plaintiff as Defendant on Counterclaim                  143</div>
<div class="line">Deferred due to Bankruptcy filing                                    126</div>
<div class="line">Withdrawn with Prejudice                                              98</div>
<div class="line">Continuance Request Denied                                            47</div>
<div class="line">Judgment for Defendant as Plaintiff on Counterclaim                   46</div>
<div class="line">Transfer to Court of Common Pleas                                     42</div>
<div class="line">Judgment by Agreement for money and/or possession                     27</div>
<div class="line">Judgment by Agreement                                                 19</div>
<div class="line">Withdrawn, Lack of Jurisdiction                                       13</div>
<div class="line">Judgment for Defendant as Plaintiff on Counter Claim                  12</div>
<div class="line">Adjudication Deferred                                                  9</div>
<div class="line">Transfer to another jurisdiction                                       8</div>
<div class="line">Petition/Affidavit Granted                                             8</div>
<div class="line">Judgment for Plaintiff as Defendant on Counter Claim by Default        5</div>
<div class="line">Withdrawn, Lack of Venue                                               3</div>
<div class="line">Judgment for Defendant as Plaintiff on Counter Claim by Default        3</div>
<div class="line">Petition / Continued To                                                2</div>
<div class="line">Petition / Held Under Advisement                                       1</div>
<div class="line">Petition/Affidavit Denied                                              1</div>
<div class="line">Resolved by Criminal Mediation Agreement                               1</div>
<div class="line">Defendant Administrative Continuance Request Denied                    1</div>
<div class="line">Additional Information:                                                1</div>
<div class="line">Discharged Bankruptcy Debt                                             1</div>
<div class="line">Judgment for Plaintiff as Defendant on Counterclaim by Default         1</div>
<div class="line">Petition/Affidavit Withdrawn Without Prejudice                         1</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
